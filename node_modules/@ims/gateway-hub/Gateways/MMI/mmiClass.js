const lib = require('../../Lib/gatewayModule');
const TransXpedia = require('../../Utils/transXpedia');
const EventEmitter = require('events');
const schema = require('./ajvSchemas');
const validateJsonSchema = require('../../Utils/utils').validateJsonSchema;

module.exports = class MMI extends EventEmitter {
    constructor(option){
        super();
        this.debugFlag = option.debugFlag == 1 ? 1 : 0;
    }

    async getAuthToken(option){
        const transXpedia = new TransXpedia(option);
        transXpedia.clientData.debugFlag = this.debugFlag;
        transXpedia.schema = schema.getAuthTokenSchema;
        await validateJsonSchema(transXpedia);
        return await lib.mmi.authToken.call(this,transXpedia)
    
    }

    async getRevGeoCode(option){
        const transXpedia = new TransXpedia(option);
        transXpedia.clientData.debugFlag = this.debugFlag;
        transXpedia.schema = schema.getRevGeoCodeSchema;
        await validateJsonSchema(transXpedia);
        return await lib.mmi.revGeoCode.call(this,transXpedia)
    }
}

