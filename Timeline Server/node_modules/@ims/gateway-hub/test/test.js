const Gateway = require("../index").Gateway;

const attr = {
  name: "ATYATI",
};

//const MMI = new Gateway(attr);
const ATYATI = new Gateway(attr);
ATYATI.on("togateway", (data) => {
  console.log("togateway", data);
});

ATYATI.on("fromgateway", (data) => {
  console.log("fromgateway", data);
});

const option_token = {
  gatewayUrl: "http://127.0.0.1:20000/getAuthToken",
  gatewayTimeout: 30,
  //rrn : '123412341234',
  transactionId: "1234567890",
  clientId: "ueruerueruer",
  clientSecret: "serserserser",
  channelId: "23",
  userId: "amit",
  bankCode: "bvc",
  transactionBranch: "12344321",
  gatewayCaCertificate: "",
  key: "",
  cert: "",
};

const option_code = {
  gatewayUrl: "http://127.0.0.1:20000/getRevGeoCode",
  gatewayTimeout: 30,
  //rrn : '123412341234',
  transactionId: "1234567890",
  clientId: "ueruerueruer",
  clientSecret: "serserserser",
  channelId: "23",
  userId: "amit",
  bankCode: "bvc",
  transactionBranch: "12344321",
  accessToken: null,
  latitude: "26.5645",
  longitude: "29.5645",
  gatewayCaCertificate: "",
  key: "",
  cert: "",
};

const option_otp = {
  gatewayUrl: "http://127.0.0.1:20000/generateOtp",
  gatewayTimeout: 60000,
  tid: "public",
  channel: "01",
  uid: "338160868489",
  terminalId: "public",
  consent: "Y",
  caTid: "register",
  agentname: "Sagar",
  agentaddress: " ",
  agentcity: "MUMBAI",
  agentstate: "22",
  bankcode: "CBI",
  cbsId: "170012103436",
  mcc: "6012",
  posCode: "05",
  posEntryMode: "019",
};

async function abc() {
  /*	console.time('module');
let ret = await MMI.getAuthToken(option_token)
console.timeEnd('module');
	option_code.accessToken = ret.responseData.accessToken;
	console.log("success token",ret);
let revret = await MMI.getRevGeoCode(option_code);
	console.log("success code",revret); */
  let ret = await ATYATI.generateOtp(option_otp);
}

abc()
  .then(() => {
    console.log("abc");
  })
  .catch((e) => {
    console.log("err", e);
  });
