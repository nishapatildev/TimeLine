const lib = require('../../Lib/gatewayModule');
const TransXpedia = require('../../Utils/transXpedia');
const EventEmitter = require('events');
const schema = require('./ajvSchemas');
const validateJsonSchema = require('../../Utils/utils').validateJsonSchema;

module.exports = class ATYATI extends EventEmitter {
    constructor(option){
        super();
        this.debugFlag = option.debugFlag == 1 ? 1 : 0;
    }

    async generateOtp(option){
            const transXpedia = new TransXpedia(option);
            transXpedia.clientData.debugFlag = this.debugFlag;
            transXpedia.schema = schema.generateOtpSchema;
           
            await validateJsonSchema(transXpedia);
            return await lib.atyati.generateOtp.call(this,transXpedia);  
    }

    async eKYC2_5(option){
            const transXpedia = new TransXpedia(option);
            transXpedia.clientData.debugFlag = this.debugFlag;
            transXpedia.schema = schema.eKYC2_5Schema;
            await validateJsonSchema(transXpedia);
            return await lib.atyati.eKYC2_5.call(this,transXpedia);
    }  
}

