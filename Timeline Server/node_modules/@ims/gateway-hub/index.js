const errModule = require("./Utils/error");
const gatewayClasses = require("./Gateways/gatewayClassess");
const listOfGatewaySupported = ["ITGS", "MMI", "ATYATI", "CBI", "APS"];

class Gateway {
  constructor(option) {
    this.gatewayName = option.name ? option.name.toUpperCase() : option.name;
    if (
      listOfGatewaySupported.indexOf(this.gatewayName) > 0 &&
      this.gatewayName === "MMI"
    ) {
      return new gatewayClasses.Mmi(option);
    } else if (
      listOfGatewaySupported.indexOf(this.gatewayName) > 0 &&
      this.gatewayName === "ATYATI"
    ) {
      return new gatewayClasses.Atyati(option);
    } else if (
      listOfGatewaySupported.indexOf(this.gatewayName) > 0 &&
      this.gatewayName === "CBI"
    ) {
      return new gatewayClasses.Cbi(option);
    } else if (
        listOfGatewaySupported.indexOf(this.gatewayName) > 0 &&
        this.gatewayName === "APS"
      ) {
        return new gatewayClasses.Aps(option);
      }
     else {
      throw errModule.GATEWAY_NOT_SUPPORTED;
    }
  }
}

module.exports = {
  Gateway,
};
